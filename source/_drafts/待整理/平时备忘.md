```
# python 重命名文件
import os
import sys
def sub(text):
    return text.format_map(safesub(sys._getframe(1).f_locals))
for file1 in  os.listdir('.'):

import os
os.chdir(sub('VueJS'))
for file in  os.listdir('.'):
    name = file
    new_name = name.replace(file[0: 9], '')
    os.rename(file, new_name)
```

## mongo

mongo

db.createUser({user: 'root', pwd: 'root123456', roles: ['root']})
db.createUser({user: 'root', pwd: 'root123456', roles: ['readWrite']})
db.createUser({user:'chuyun',pwd:'chuyun123',roles:[{role:'readWrite',db:'cykoa2'}]})

查看所有用户： db.system.users.find().pretty()

验证帐号：db.auth('root', 'root123456')

开启帐号验证： mongod --dbpath /data/db   --auth 

没有帐号的时候可以连接成功，但是不可以查询，删改等操作

https://www.jianshu.com/p/b5fd46aaec43




开启mongo db后台服务
使用--fork参数启动

mongod --fork --logpath /home/log/mongodb.log --dbpath <db_folder_path>
--fork 将mongod作为后台服务启动，并必须要跟随 --logpath 指定日志文件路径，如果该日志文件不存在会被自动创建
--dbpath 数据的存储目录

## python 部署运行

* 从github克隆代码，git clone https://github.com/lion1ou/cy_python.git
* 安装依赖，使用sudo模式安装
* 添加配置文件
* 使用python chuyun_python.py运行,安装配置Gunicorn:https://blog.csdn.net/u012675539/article/details/50836775
* 使用supervisor来保护进程：https://blog.csdn.net/xyang81/article/details/51555473
* yum install supervisor
* sudo vi /etc/supervisord.conf (默认配置)
* vi /etc/supervisord.d/self.ini（自己的配置）
* sudo supervisord
* 查看进程:  supervisorctl, sudo supervisorctl reload

```
[program:cy_python]
command=gunicorn -w 3 -b 0.0.0.0:7077 chuyun_python:app
autostart=true
autorestart=true
stdout_logfile=/home/cy_python/test.log
```

### 关于版本

* 补丁版本：解决了 Bug 或者一些较小的更改，增加最后一位数字，比如 1.0.1
* 小版本：增加了新特性，同时不会影响之前的版本，增加中间一位数字，比如 1.1.0
* 大版本：大改版，无法兼容之前的，增加第一位数字，比如 2.0.0


### 服务器操作备忘

阿里云服务器ssh经常一段时间就断掉解决办法

#### 方法一

#vim /etc/ssh/sshd_config

找到下面两行

#ClientAliveInterval 0
#ClientAliveCountMax 3
去掉注释，改成

ClientAliveInterval 30
ClientAliveCountMax 86400
这两行的意思分别是

1、客户端每隔多少秒向服务发送一个心跳数据

2、客户端多少秒没有相应，服务器自动断掉连接

重启sshd服务

systemctl restart sshd

#### 方法二

修改 /etc/profile

```
TMOUT=180  //空闲自动断开时间设置为180秒，即3分钟
```
---
title: 前端错误上报
toc: true
comments: true
categories: 技术博客
tags: Default
date: 2020-09-17 18:22:02
photos:
description:
---

// window.onerror 和 window.addEventListener('error')的异同:相同点是都可以捕获到 window 上的 js 运行时错误。区别是
// 1.捕获到的错误参数不同
// 2.window.addEventListener('error')可以捕获资源加载错误，但是 window.onerror 不能捕获到资源加载错误

```js
window.onerror = function (msg, url, row, col, error) {
  /**
   * @param {String}  msg    错误信息
   * @param {String}  url    出错文件
   * @param {Number}  row    行号
   * @param {Number}  col    列号
   * @param {Object}  error  错误详细信息
   */
  console.log("+++++++++++++++++++++监听了onerror", msg, url, row, col, error);
  if (msg) {
    reportError({ errorName: "onerror", errorMsg: msg });
  }
  return true;
};
```

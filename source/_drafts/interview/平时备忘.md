```
# python 重命名文件
import os
import sys
def sub(text):
    return text.format_map(safesub(sys._getframe(1).f_locals))
for file1 in  os.listdir('.'):

import os
os.chdir(sub('VueJS'))
for file in  os.listdir('.'):
    name = file
    new_name = name.replace(file[0: 9], '')
    os.rename(file, new_name)
```

## mongo

mongo

db.createUser({user: 'root', pwd: 'root123456', roles: ['root']})
db.createUser({user: 'root', pwd: 'root123456', roles: ['readWrite']})
db.createUser({user:'chuyun',pwd:'chuyun123',roles:[{role:'readWrite',db:'cykoa2'}]})

查看所有用户： db.system.users.find().pretty()

验证帐号：db.auth('root', 'root123456')

开启帐号验证： mongod --dbpath /data/db --auth

没有帐号的时候可以连接成功，但是不可以查询，删改等操作

https://www.jianshu.com/p/b5fd46aaec43

开启 mongo db 后台服务
使用--fork 参数启动

mongod --fork --logpath /home/log/mongodb.log --dbpath <db_folder_path>
--fork 将 mongod 作为后台服务启动，并必须要跟随 --logpath 指定日志文件路径，如果该日志文件不存在会被自动创建
--dbpath 数据的存储目录

## python 部署运行

- 从 github 克隆代码，git clone https://github.com/lion1ou/cy_python.git
- 安装依赖，使用 sudo 模式安装
- 添加配置文件
- 使用 python chuyun_python.py 运行,安装配置 Gunicorn:https://blog.csdn.net/u012675539/article/details/50836775
- 使用 supervisor 来保护进程：https://blog.csdn.net/xyang81/article/details/51555473
- yum install supervisor
- sudo vi /etc/supervisord.conf (默认配置)
- vi /etc/supervisord.d/self.ini（自己的配置）
- sudo supervisord
- 查看进程: supervisorctl, sudo supervisorctl reload

```
[program:cy_python]
command=gunicorn -w 3 -b 0.0.0.0:7077 chuyun_python:app
autostart=true
autorestart=true
stdout_logfile=/home/cy_python/test.log
```

### 关于版本

- 补丁版本：解决了 Bug 或者一些较小的更改，增加最后一位数字，比如 1.0.1
- 小版本：增加了新特性，同时不会影响之前的版本，增加中间一位数字，比如 1.1.0
- 大版本：大改版，无法兼容之前的，增加第一位数字，比如 2.0.0

### 服务器操作备忘

阿里云服务器 ssh 经常一段时间就断掉解决办法

#### 方法一

#vim /etc/ssh/sshd_config

找到下面两行

#ClientAliveInterval 0
#ClientAliveCountMax 3
去掉注释，改成

ClientAliveInterval 30
ClientAliveCountMax 86400
这两行的意思分别是

1、客户端每隔多少秒向服务发送一个心跳数据

2、客户端多少秒没有相应，服务器自动断掉连接

重启 sshd 服务

systemctl restart sshd

#### 方法二

修改 /etc/profile

```
TMOUT=180  //空闲自动断开时间设置为180秒，即3分钟
```

1. Ios 上输入框有阴影

```
input{
    -webkit-appearance: none;
}
```

- 页面 loading，添加时机
  （如果是 300ms 后再添加会很突兀，根据页面加载速度再添加）

* 滚动加载更多：

  在 popup 层有问题

- position: fixed 失效的奇怪现象

在设置 position:fixed 时，会偶现 position: absolute 现象

原因： 是父元素（祖先元素）中的 transform 属性导致的

有三点

1. transform 属性值不为 none 的元素
2. perspective 值不为 none 的元素
3. 在 will-change 中指定了任意 CSS 属性

这只是 position: fixed 的一个特性，和 bug 无关。fixed 不为元素预留空间，而是通过指定元素相对于屏幕视口（viewport）的位置来指定元素位置。元素的位置在屏幕滚动时不会改变。打印时，元素会出现在的每页的固定位置。fixed 属性会创建新的层叠上下文。当元素祖先的 transform 属性非 none 时，容器由视口改为该祖先。

解决：
由于需求需要父级元素必须要有 transform 属性来控制动画效果，所以将父级原生 transform 属性去掉这个方法就行不通了。那就只能换个思路，因为我们滚动，改变了视窗 viewport 的移动位置，所以改变 fixed 的位置，那我们就让对象不被滚动，不移动那他不就不会变化了吗？ 所以我们把需要滚动的内容，通过 position:absolute;top 和 bottom 来设置页面的滚动位置，让整个页面不滚动，只让需要滚动的地方滚动。

position 有八个值

- postion: absolute
- position: relative
- position: fixed
- position: static

全局：

- position: unset
- position: inherit
- position: initial

实验性：

- position: sticky

- js FileReader API

```js
let reader = new FileReader();
reader.readAsDataURL(file);
reader.onloadstart = function () {};
reader.onloadend = function () {};
reader.onload = function (data) {
  let img = new Image();
  img.src = data.target.result;
  img.onload = function () {};
};
reader.onprogress = function () {};
```

- IOS 上监听 scroll 会在 scroll 事件执行后才回调

https://segmentfault.com/q/1010000007323949

https://www.jianshu.com/p/c7333df1b118

http://github.merrier.wang/mobile-scroll-events/

在苹果手机上使用-webkit-overflow-scrolling:touch 会导致使用固定定位的元素，随着页面一起滚动，只有滚动停止时才会恢复原位。如果不用这个属性的话，使用 overflow-y:属性的盒子滑动非常不流畅，求大神帮忙

原因是在 css 里添加了
-webkit-overflow-scrolling : touch;

- Object.assign 兼容性问题

先说说 Object.assign，该方法是 ES6 中合并对象用的。
IE 不支持 Object.assign
chrome，firefox 等浏览器是支持该方法的，但是一些低版本的浏览器并不支持该方法。

开发遇到问题如下：
用到了 Object.assign 合并两个对象，结果在 iphone5S 中和一些低端的 Android 手机不显示消息列表，问题就出在这个 Object.assign 上。

Array.prototype.includes()兼容性问题

ios8 系列机型无法运行会报错，改用 indexOf()解决

https://hufangyun.com/2017/zsh-plugin/

- 长按文字区域弹出复制选择框

因为是 web 页面，长按住某一个文字区域会弹出复制选择框(android 4.0)可以通过屏蔽

```css
body {
  -webkit-user-select: none;
}
```

- 通过 html 标签移除缓存的影响

```html
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="Cache-Control" content="no-cache, must-revalidate" />
<meta http-equiv="expires" content="0" />
```

- a 标签的 href 属性机制

触发 a 的 click 事件=》读取 href 属性的值=》如果是 URI 则跳转=》如果是 javascript 代码则执行该代码

> 在不需要传递 this 作为方法的参数时候，推荐使用

```html
<a href="javascript:doSomething()"></a>
```

> 如果需要使用 this 参数，推荐

```html
<a href="javascript:void(0);" onclick="doSomething(this)"> </a>
```

1.创建一个二进制相加函数，根据传入的两个二进制数字符串返回一个相加的十进制的结果。

```js
/*
 * @param {String} a number a
 * @param {String} b number b
 * return {Number} the result
 */
function calculate(num1, num2) {
  // implement here
}
// 结果样例： calculate("10", "10") // => 4 calculate("10", "0") // => 2 calculate("101", "10") // => 7
```

2.正则题 var string = "我的账户余额：2,235,467.20";

```js
console.log(?);
// 请用 js 计算出我到底有多少钱（输出 Number 类型数字，代码尽量简洁，考虑通用情况）
```

3.作用域

```js
function person() {
  return this.name;
}
var someOne = { name: "Jenny", age: 18 }; // 此处如何输出 'Jenny'
```

4.语法题 有一个合法的 JSON 对象（即不包含函数等值的对象），设计一个函数，取出该对象内所有 key 为 "id" 并且其值不为对象、数组的值，装入一个数组并返回。

```js
function extractIds(data) { // implement }
样例数据：
var data = { id: 1, items: [ { id: 2 }, { item: 3, id: [ { id: 4 }, { id: 5 } ]} ] };
extractIds(data); // should return [ 1, 2, 4, 5 ]
```

5.闭包 下面五段代码分别输出什么？并且什么时候输出什么？

```js
for(var i = 0; i < 5; i++) { console.log(i); }
for(var i = 0; i < 5; i++) { setTimeout(function() { console.log(i); }, 1000 _ i); }
for(var i = 0; i < 5; i++) { (function(i) { setTimeout(function() { console.log(i); }, i _ 1000); })(i); }
for(var i = 0; i < 5; i++) { (function() { setTimeout(function() { console.log(i); }, i _ 1000); })(i); }
for(var i = 0; i < 5; i++) { setTimeout((function(i) { console.log(i); })(i), i _ 1000); }
```

# 运行环境

## 浏览器内核

### 介绍一下你对浏览器内核的理解？

浏览器内核分为渲染引擎和JS引擎。

* 渲染引擎：主要负责获取网页上的内容（HTML/XML/图片等），结合CSS样式和浏览器显示方式，然后输出显示。浏览器的内核不同对于`网页语法的解析`也不同，所以渲染效果也会不同。所有网页浏览器，电子邮件客户端以及其他显示编辑网络内容的应用程序都需要内核。

* JS引擎主要负责解析和执行JavaScript代码来实现网页的效果和动作。最开始的时候渲染引擎和JS引擎没有明显的区分，后来像Chrome V8引擎这样的js引擎越来越独立，所以内核就倾向指渲染引擎。

### 常见的浏览器内核有哪些？

* Trident内核：IE,MaxThon,TT,The World,360,搜狗浏览器等。[又称MSHTML]
* Gecko内核：Netscape6及以上版本，FF,MozillaSuite/SeaMonkey等
* Presto内核：Opera7及以上。      [Opera内核原为：Presto，现为：Blink;]
* Webkit内核：Safari,Chrome等。   [ Chrome的：Blink（WebKit的分支）]

详细文章：[浏览器内核的解析和对比](http://www.cnblogs.com/fullhouse/archive/2011/12/19/2293455.html)

## 浏览器的工作流程

1. 解析HTML然后构建DOM树
2. 解析CSS转为CSSDOM（呈现树）
3. 构建渲染（render）树，包含颜色和大小的矩形组成
4. 布局排列渲染(render)树，确定每个节点在屏幕上的确切坐标
5. 绘制渲染（render）树，遍历render树，使用UI后端层绘制每个节点

### 浏览器的重绘（redraw）、重排(reflow)和重渲染有什么区别?

页面在生成的过程中，最少会进行一次渲染。在用户使用的过程中页面还会不断的重新渲染。有以下三种情况，会导致页面重新渲染：

1. 修改DOM元素
2. 修改样式表
3. 用户事件（鼠标悬停，页面滚动，输入框键值等）

重新渲染就需要`重新生成渲染树布局`和`重新绘制渲染树`。前者叫“重排”，后枕叫“重绘”。需要注意的是重绘不一定需要重排，但重排一定需要重绘。（比如只改变页面颜色，那就只需要重绘，不需要重排。如果改变一个元素的位置，则就就需要重新布局）

## 老浏览器兼容

> 写出几种IE6 BUG的解决方法，IE和标准下有哪些兼容性的写法

1. 双边距BUG float引起的 使用display
2. 3像素问题 使用float引起的 使用dislpay:inline -3px
3. 超链接hover 点击后失效 使用正确的书写顺序 link visited hover active
4. IE z-index问题 给父级添加position:relative
5. Png 透明 使用js代码 改
6. Min-height 最小高度 !Important 解决
7. select 在ie6下遮盖 使用iframe嵌套
8. 为什么没有办法定义1px左右的宽度容器（IE6默认的行高造成的，使用over:hidden,zoom:0.08 li ne-height:1px）

### 浏览器默认字体大小和行高及字体最小限制

1. 默认字体大小和行高

> 经过测试，所有浏览器的默认line-height值都为1， 除了IE8之外，所有浏览器的默认font-size值都为16px IE8的默认font-size为12pt

2. 字体最小限制

> 在桌面端的Chrome/Opera存在最小字体限制，最小字体为12px，即如果设置的字体小于12px，那么浏览器自作主张地把字体给你设置为12px。 除了这两款浏览器外，其他所有浏览器都不存在字体最小限制！(在低版本Chrome/Opera可以使用-webkit-text-size-adjust来取消这个默认机制！)

## 移动端兼容

### 移动端默认的input和按钮样式还有点击出现的样式不一样  需要默认去清除一些默认样式

```css
//去掉webkit的滚动条——display: none;
//其他参数
::-webkit-scrollba //滚动条整体部分
::-webkit-scrollbar-thumb   //滚动条内的小方块
::-webkit-scrollbar-track   //滚动条轨道
::-webkit-scrollbar-button  //滚动条轨道两端按钮
::-webkit-scrollbar-track-piece  //滚动条中间部分，内置轨道
::-webkit-scrollbar-corner       //边角，两个滚动条交汇处
::-webkit-resizer            //两个滚动条的交汇处上用于通过拖动调整元素大小的小控件

// 禁止长按链接与图片弹出菜单
a,img { -webkit-touch-callout: none }

// 禁止ios和android用户选中文字
html,body {-webkit-user-select:none; user-select: none; }

// 改变输入框placeholder的颜色值
::-webkit-input-placeholder { /* WebKit browsers */
color: #999; }
:-moz-placeholder { /* Mozilla Firefox 4 to 18 */
color: #999; }
::-moz-placeholder { /* Mozilla Firefox 19+ */
color: #999; }
:-ms-input-placeholder { /* Internet Explorer 10+ */
color: #999; }
input:focus::-webkit-input-placeholder{ color:#999; }

// android上去掉语音输入按钮
input::-webkit-input-speech-button {display: none}

// 阻止windows Phone的默认触摸事件
/*说明：winphone下默认触摸事件事件使用e.preventDefault是无效的，可通过样式来禁用，如：*/
html { -ms-touch-action:none; } //禁止winphone默认触摸事件

//ios用户点击一个链接，会出现一个半透明灰色遮罩, 如果想要禁用，可设置-webkit-tap-highlight-color的alpha值为0去除灰色半透明遮罩；
//android用户点击一个链接，会出现一个边框或者半透明灰色遮罩, 不同生产商定义出来额效果不一样，可设置-webkit-tap-highlight-color的alpha值为0去除部分机器自带的效果；
//winphone系统,点击标签产生的灰色半透明背景，能通过设置<meta name="msapplication-tap-highlight" content="no">去掉；
//特殊说明：有些机型去除不了，如小米2。对于按钮类还有个办法，不使用a或者input标签，直接用div标签
a,button,input,textarea {
    -webkit-tap-highlight-color: rgba(0,0,0,0);
    -webkit-user-modify:read-write-plaintext-only; //-webkit-user-modify有个副作用，就是输入法不再能够输入多个字符
}
// 也可以
* { -webkit-tap-highlight-color: rgba(0,0,0,0); }
//winphone下
<meta name="msapplication-tap-highlight" content="no">
```

### 手机拍照和上传图片

```html
/*
*IOS有拍照、录像、选取本地图片功能，
*部分Android只有选择本地图片功能。
*Winphone不支持
*/
<input type="file" accept="images/*" />
```

### 消除transition闪屏

```
.css {
    -webkit-transform-style: preserve-3d;
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 1000;
}


======一下内容与上无关=====
//目前，像Chrome/Filefox/Safari/IE9+以及最新版本Opera都支持硬件加速，当检测到某个DOM元素应用了某些CSS规则时就会自动开启，从而解决页面闪白，保证动画流畅。
.css {
    -webkit-transform: translate3d(0,0,0);
    -moz-transform: translate3d(0,0,0);
    -ms-transform: translate3d(0,0,0);
    transform: translate3d(0,0,0);
}
```

### 固定定位相关问题？

* 固定定位会产生  键盘弹出遮住固定元素里面元素的input框
* 固定定位的遮罩层弹出时  滚动到最底部  qq和uc浏览器会出现遮罩层下面的样式露出来

### 其他

* 在ios上写有邮箱文本点击这个邮箱地址不会有反应，安卓手机上点击邮箱会自动打开本地邮箱软件。

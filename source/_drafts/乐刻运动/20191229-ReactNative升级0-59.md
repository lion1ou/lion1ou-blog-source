---
title: ReactNative升级0.59
toc: true
comments: true
date: 2019-12-29 16:59:08
categories:
tags:
photos:
---

事情的起因是谷歌宣布19年8月1号开始在Google Play上架的应用都必须支持64位体系，而RN版本对64位的支持从0.58才开始，而项目组使用的版本比这低，因此升级是在所难免的。考虑到升级后框架更稳定而且含有更多特性，事不宜迟马上开搞。
升级的第一个问题是该升到哪个版本。当前时间段最新的版本有0.59和0.60（吐槽下时隔四年RN还没1.0版本）。从0.60的 changelog 中我们发现有一个重大的 breaking change 就是 AndroidX support。这个改动不像支持64位体系那样改改编译参数就行，还必须改动原生代码，是个改动量非常大的升级（主要是针对第三方库以及项目中的原生代码改动较大），而特性并没有比 0.59 多太多，反而去掉了很多以前的内置组件，移到社区托管了。因此最终钦定 0.59.10 为升级目标版本。
<!--more-->

问题：
 数值需要判空，不然会直接报错
QRcode 组件（react-native-qrcode）无法使用   不兼容新版RN  

![image.png](https://img04.sogoucdn.com/app/a/100520146/c005213b24c804f1b0b7de239639875b)

"react-native-qrcode": "github:wanxsb/react-native-qrcode#1a08f9cedcb747fd230be717fe815c686e4427cb",

更新  npm install react-native-qrcode --save

有些样式出现错误，原因是  0.49.5  box-sizing默认是content-box,  0.59.9 box-sizing 默认是 border-box







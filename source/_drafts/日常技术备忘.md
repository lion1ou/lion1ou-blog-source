# React Native

目前需要解决的问题：

1. RN 登录态管理，实现首页基本功能
2. 将首页功能嵌入APP
3. 与APP交互，页面跳转
4. 与原有H5页面交互，页面跳转

> 这两天主要搭建了RN 环境，分别在ios和android上跑了Demo， 熟悉了一下常用组件。 

> 接下来准备以重写教练端首页为基础，落实解决下列问题：

1. RN 登录态管理
2. 将首页功能嵌入现有APP
3. 与APP交互，完成页面跳转
4. 与原有H5页面交互，完成页面跳转
5. 


RN真机调试  摇一摇手机

RN添加iconfont：只要修改assets内的文件，然后重新打包，添加对应的key和value就可以


1. rn ios zindex  层级问题，同级的比较
2. RNbridge 监听事件 https://reactnative.cn/docs/native-modules-ios/#%E7%BB%99-javascript-%E7%AB%AF%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6

react-navigator 嵌套标题设置无效问题：https://reactnavigation.org/docs/zh-Hans/navigation-options-resolution.html


# Other

* Vue 使用 $set  $watch  computed

* $set 

```
postData={
  startTime:''
}
value = 'ssss' 
this.$set(postData, ’startTime’, value)
// 注： 在首次设置这个数组的时候使用set方法，后续修改可不用set方法（直接赋值）
```

* 可以使用变异方法，push,splice



* $watch 
如果不想进到页面就执行监听代码，可以需要的时机去添加对应的监听方法


```
this.$watch('a', this.aChangeHandler)
```



* IOS兼容问题

1. Ios 上输入框有阴影

```
input{
    -webkit-appearance: none;
}
```

2. url参数中文乱码问题解决


* 分页滚动加载问题

使用better-scroll 实现滚动加载问题，体验提升很多，而且防止了教练端ios下滚动的问题


* 获取滚动条位置 

* 页面具有 DTD（或者说指定了 DOCTYPE）时，需要使用 document.documentElement。 
* 页面不具有 DTD（或者说没有指定了 DOCTYPE）时，需要使用 document.body。 
* 在 IE 和 Firefox 中均是如此。 
* 为了兼容（不管有没有 DTD），可以使用如下代码： 

```javascript 
var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0; 
``` 

* 获取屏幕高度 

* 网页可见区域宽： `document.body.clientWidth` 
* 网页可见区域高： `document.body.clientHeight` 
* 网页可见区域宽(包括边线的宽)： `document.body.offsetWidth` 
* 网页可见区域高(包括边线的高)： `document.body.offsetHeight` 
* 网页正文全文宽： `document.body.scrollWidth` 
* 网页正文全文高： `document.body.scrollHeight` 
* 网页被卷去的高(滚动条的位置)： `document.body.scrollTop` 
* 网页被卷去的左(滚动条的位置)： `document.body.scrollLeft` 
* 网页正文部分上： `window.screenTop` 
* 网页正文部分左： `window.screenLeft` 
* 屏幕分辨率的高： `window.screen.height` 
* 屏幕分辨率的宽： `window.screen.width` 
* 屏幕可用工作区高度： `window.screen.availHeight` 
* 屏幕可用工作区宽度： `window.screen.availWidth` 
window.innerHeight 
document.documentElement.clientHeight 

* 页面loading，添加时机
（如果是300ms后再添加会很突兀，根据页面加载速度再添加） 

滚动加载更多：
在popup层有问题 

* position: fixed失效的奇怪现象
在设置position:fixed时，会偶现position: absolute现象 
原因： 是父元素（祖先元素）中的 transform属性导致的 

有三点
1. transform 属性值不为 none 的元素
2. perspective 值不为 none 的元素
3. 在 will-change 中指定了任意 CSS 属性

这只是position: fixed的一个特性，和bug无关。fixed不为元素预留空间，而是通过指定元素相对于屏幕视口（viewport）的位置来指定元素位置。元素的位置在屏幕滚动时不会改变。打印时，元素会出现在的每页的固定位置。fixed 属性会创建新的层叠上下文。当元素祖先的 transform  属性非 none 时，容器由视口改为该祖先。

解决：
由于需求需要父级元素必须要有transform属性来控制动画效果，所以将父级原生transform属性去掉这个方法就行不通了。那就只能换个思路，因为我们滚动，改变了视窗viewport的移动位置，所以改变fixed的位置，那我们就让对象不被滚动，不移动那他不就不会变化了吗？ 所以我们把需要滚动的内容，通过position:absolute;top和bottom来设置页面的滚动位置，让整个页面不滚动，只让需要滚动的地方滚动。 

position 有八个值
postion: absolute 
position: relative 
position: fixed 
position: static 
全局： 
position: unset 
position: inherit 
position: initial 
实验性： 
position: sticky 

* js FileReader API

let reader = new FileReader() 
reader.readAsDataURL(file) 
reader.onloadstart = function () {} 
reader.onloadend = function () {} 
reader.onload = function (data) { 
let img = new Image() 
img.src = data.target.result 
img.onload = function () {} 
} 
reader.onprogress = function () {} 


* IOS上监听scroll 会在scroll事件执行后才回调
https://segmentfault.com/q/1010000007323949
https://www.jianshu.com/p/c7333df1b118
http://github.merrier.wang/mobile-scroll-events/
在苹果手机上使用-webkit-overflow-scrolling:touch会导致使用固定定位的元素，随着页面一起滚动，只有滚动停止时才会恢复原位。如果不用这个属性的话，使用overflow-y:属性的盒子滑动非常不流畅，求大神帮忙

原因是在css里添加了 
-webkit-overflow-scrolling : touch;



* Object.assign兼容性问题

先说说Object.assign，该方法是ES6中合并对象用的。 
IE不支持 Object.assign 
chrome，firefox等浏览器是支持该方法的，但是一些低版本的浏览器并不支持该方法。 

开发遇到问题如下： 
用到了Object.assign合并两个对象，结果在iphone5S中和一些低端的Android手机不显示消息列表，问题就出在这个Object.assign上。 

Array.prototype.includes()兼容性问题

ios8系列机型无法运行会报错，改用indexOf()解决 

https://hufangyun.com/2017/zsh-plugin/


* 长按文字区域弹出复制选择框

因为是web页面，长按住某一个文字区域会弹出复制选择框(android 4.0)可以通过屏蔽 
```css 
body { 
-webkit-user-select:none; 
} 
``` 

* 通过html标签移除缓存的影响
```html 
<meta HTTP-EQUIV="pragma" CONTENT="no-cache"> 
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta HTTP-EQUIV="expires" CONTENT="0"> 
``` 

* a标签的href属性机制

触发a的click事件=》读取href属性的值=》如果是URI则跳转=》如果是javascript代码则执行该代码 

>在不需要传递this作为方法的参数时候，推荐使用 
```html 
<a href="javascript:doSomething()" ></a> 
``` 
>如果需要使用this参数，推荐 
```html 
<a href="javascript:void(0);" onclick="doSomething(this)" > </a> 
``` 


# # HTML&CSS（分别10分） 
1. 一个div，宽度是100px，此时设置padding是20px，添加一个什么css属性可以让div的实际宽度仍然保持在100px，而不是140px？
2. 清除浮动的方式，提供尽可能多的方案。
3. 如何让两个div分别以40%和60%的比例排在一行内，提供尽可能多的方案。
4. 如何用css实现一个div的一秒内向右平滑移动100px的动画
5. localStorage，sessionStorage，Cookie的区别和用途。

1.创建一个二进制相加函数，根据传入的两个二进制数字符串返回一个相加的十进制的结果。
 /* *
* @param {String} a number a 
* @param {String} b number b 
* return {Number} the result 
*/ 
function calculate(num1, num2){
 // implement here 
} 
结果样例： calculate("10", "10") // => 4 calculate("10", "0") // => 2 calculate("101", "10") // => 7

2.正则题 var string = "我的账户余额：2,235,467.20"; 
console.log(?); 
// 请用js计算出我到底有多少钱（输出Number类型数字，代码尽量简洁，考虑通用情况）

3.作用域 
function person() { return this.name; } 
var someOne = { name: 'Jenny', age: 18 }; // 此处如何输出 'Jenny'

4.语法题 有一个合法的 JSON 对象（即不包含函数等值的对象），设计一个函数，取出该对象内所有 key 为 "id" 并且其值不为对象、数组的值，装入一个数组并返回。 
function extractIds(data) { // implement } 
样例数据： 
var data = { id: 1, items: [ { id: 2 }, { item: 3, id: [ { id: 4 }, { id: 5 } ]} ] };
 extractIds(data); // should return [ 1, 2, 4, 5 ]

5.闭包 下面五段代码分别输出什么？并且什么时候输出什么？ 
for(var i = 0; i < 5; i++) { console.log(i); } 
for(var i = 0; i < 5; i++) { setTimeout(function() { console.log(i); }, 1000 * i); } 
for(var i = 0; i < 5; i++) { (function(i) { setTimeout(function() { console.log(i); }, i * 1000); })(i); } 
for(var i = 0; i < 5; i++) { (function() { setTimeout(function() { console.log(i); }, i * 1000); })(i); } 
for(var i = 0; i < 5; i++) { setTimeout((function(i) { console.log(i); })(i), i * 1000); }